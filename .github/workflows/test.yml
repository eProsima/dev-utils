name: test

on:
  workflow_dispatch:
  pull_request:
  push:
    branches:
      - main
  schedule:
    - cron: '0 1 * * *'

jobs:

###########################################################
# UNCRUSTIFY
  uncrustify:
    # (TODO) Use this action from a common repo and not copy it in every repo
    runs-on: ubuntu-22.04

    steps:

      - name: Uncrustify
        uses: eProsima/eProsima-CI/ubuntu-22.04/uncrustify@feature/uncrustify
        with:
          result_filename: dev_utils_uncrustify.xml

    # Optional to upload files
      - name: Upload uncrustify results
        uses: actions/upload-artifact@v3
        with:
          name: uncrustify_results
          path: dev_utils_uncrustify.xml
